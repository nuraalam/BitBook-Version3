@{
    ViewBag.Title = "Wall";
}

<h2>Wall Post</h2>

<div class="publishContainer">
    <textarea class="msgTextArea" id="txtMessage" data-bind="value: newMessage, jqAutoresize: {}" style="height:3em;" placeholder="What's on your mind?"></textarea>
    <input type="button"  value="Post" id="btnShare" data-bind="click: addPost">
</div>
<p class="error" style="color:red" data-bind="text:error"></p>
<div class="notification" data-bind="visible: newPosts().length > 0"><a data-bind="    click: loadNewPosts"> <span data-bind="    text: newPosts().length"></span> new post(s)</a></div>
<ul id="msgHolder" data-bind="foreach: posts">
    <li class="postHolder">
        <img data-bind="attr: { src: PostedByAvatar }"><p><a data-bind="text: PostedByName"></a>: <span data-bind="    html: Message"></span></p>
        <div class="postFooter">
           
            
            <a data-bind="click: loadAllLikers">
                <span data-bind="    text: numberOfLikes"></span> Liked
            </a><br />


            <span class="timeago" data-bind="text: PostedDate"></span>&nbsp;


            <a href="#" data-bind="click: addLike">Like or DisLike the Post</a>&nbsp;
            <a class="notification" data-bind="click:loadNewLikes,visible:NewLikes().length>0">
                <span data-bind=" text: NewLikes().length"></span>  new like notification
            </a>&nbsp;
            

            
            


            <a class="notification" data-bind="click: loadNewComments, visible: NewComments().length > 0"> 
            <span data-bind="    text: NewComments().length"></span> new comment notification</a>


    <div class="commentSection">
        <ul data-bind="foreach: PostComments">
            <li class="commentHolder">
                <img data-bind="attr: { src: CommentedByAvatar }"><p><a data-bind="text: CommentedByName"></a>: <span data-bind="    html: Message"></span></p>
                <div class="commentFooter"> <span class="timeago" data-bind="text: CommentedDate"></span>&nbsp;</div>
            </li>
        </ul>
        <div style="display: block" class="publishComment">
            <textarea class="commentTextArea" data-bind="value: newCommentMessage, jqAutoresize: {}" placeholder="write a comment..."></textarea>
            <input type="button" value="Comment" class="btnComment" data-bind="click: addComment" />
        </div>
    </div>
</div>
    </li>
</ul>
@section scripts{
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-1.1.2.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <script src="~/Scripts/jquery.autosize-min.js"></script>
    <script src="~/Scripts/jquery.timeago.js"></script>
    <script src="~/Scripts/knockout-2.2.0.js"></script>
    <script src="~/Scripts/wallpost.js"></script>



}